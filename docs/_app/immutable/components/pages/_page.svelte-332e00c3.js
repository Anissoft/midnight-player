import{S as z,i as G,s as H,k as m,q as O,a as E,l as p,m as y,r as R,h,c as k,n as u,b as V,G as c,I as L,J as D,K as ie,B,L as ue,H as oe,o as ce,u as de,M as x,N as A,w as $,x as ee,y as te,f as se,t as re,z as ne}from"../../chunks/index-4d079cab.js";import{p as ae}from"../../chunks/stores-ec20e1cf.js";import{j as U}from"../../chunks/singletons-3f8c0d42.js";U.disable_scroll_handling;const fe=U.goto;U.invalidate;U.invalidateAll;U.preload_data;U.preload_code;U.before_navigate;U.after_navigate;function me(o){let t,e,s,r,n,i,l,a,d,b,T,_,v,N,f,C,S,W,F,w,J,q,j,M,Y,K;return{c(){t=m("form"),e=m("p"),s=m("label"),r=O("Video from URL:"),n=E(),i=m("input"),l=E(),a=m("br"),d=E(),b=m("label"),T=O("Should play the exact second:"),_=E(),v=m("input"),N=E(),f=m("br"),C=E(),S=m("label"),W=O("When current time is:"),F=E(),w=m("input"),J=E(),q=m("br"),j=E(),M=m("p"),this.h()},l(I){t=p(I,"FORM",{class:!0});var P=y(t);e=p(P,"P",{class:!0});var g=y(e);s=p(g,"LABEL",{for:!0,class:!0});var Q=y(s);r=R(Q,"Video from URL:"),Q.forEach(h),n=k(g),i=p(g,"INPUT",{type:!0,id:!0,name:!0,placeholder:!0,class:!0}),l=k(g),a=p(g,"BR",{}),d=k(g),b=p(g,"LABEL",{for:!0,class:!0});var X=y(b);T=R(X,"Should play the exact second:"),X.forEach(h),_=k(g),v=p(g,"INPUT",{type:!0,id:!0,name:!0,min:!0,max:!0,step:!0,class:!0}),N=k(g),f=p(g,"BR",{}),C=k(g),S=p(g,"LABEL",{for:!0,class:!0});var Z=y(S);W=R(Z,"When current time is:"),Z.forEach(h),F=k(g),w=p(g,"INPUT",{type:!0,id:!0,name:!0,step:!0,class:!0}),J=k(g),q=p(g,"BR",{}),g.forEach(h),j=k(P),M=p(P,"P",{}),y(M).forEach(h),P.forEach(h),this.h()},h(){u(s,"for","source"),u(s,"class","svelte-1kctxfd"),u(i,"type","url"),u(i,"id","source"),u(i,"name","source"),u(i,"placeholder","YouTube link or direct link to the video file"),u(i,"class","svelte-1kctxfd"),u(b,"for","second"),u(b,"class","svelte-1kctxfd"),u(v,"type","number"),u(v,"id","second"),u(v,"name","second"),u(v,"min","0"),u(v,"max",""),u(v,"step","1"),u(v,"class","svelte-1kctxfd"),u(S,"for","time"),u(S,"class","svelte-1kctxfd"),u(w,"type","time"),u(w,"id","time"),u(w,"name","time"),u(w,"step","10"),u(w,"class","svelte-1kctxfd"),u(e,"class","container svelte-1kctxfd"),u(t,"class","root")},m(I,P){V(I,t,P),c(t,e),c(e,s),c(s,r),c(e,n),c(e,i),L(i,o[0]),c(e,l),c(e,a),c(e,d),c(e,b),c(b,T),c(e,_),c(e,v),L(v,o[1]),c(e,N),c(e,f),c(e,C),c(e,S),c(S,W),c(e,F),c(e,w),L(w,o[2]),c(e,J),c(e,q),c(t,j),c(t,M),Y||(K=[D(i,"input",o[6]),D(i,"blur",o[3]),D(v,"input",o[7]),D(v,"change",o[3]),D(v,"input",o[3]),D(w,"input",o[8]),D(w,"blur",o[3])],Y=!0)},p(I,[P]){P&1&&L(i,I[0]),P&2&&ie(v.value)!==I[1]&&L(v,I[1]),P&4&&L(w,I[2])},i:B,o:B,d(I){I&&h(t),Y=!1,ue(K)}}}function pe(o,t,e){let s;oe(o,ae,_=>e(5,s=_));let{onChange:r}=t,n="",i=0,l="23:59:59";const a=_=>{_.currentTarget!==document.activeElement&&fe(`?${s.url.searchParams.toString()}`)};ce(()=>{e(0,n=s.url.searchParams.get("source")||""),e(1,i=parseInt(s.url.searchParams.get("second")||"0")),e(2,l=s.url.searchParams.get("time")||"23:59:59")});function d(){n=this.value,e(0,n)}function b(){i=ie(this.value),e(1,i)}function T(){l=this.value,e(2,l)}return o.$$set=_=>{"onChange"in _&&e(4,r=_.onChange)},o.$$.update=()=>{if(o.$$.dirty&4&&l===""&&e(2,l="23:59:59"),o.$$.dirty&55){let _=new Date(new Date().toString().split(":")[0].slice(0,-2)+l);_<new Date&&_.setDate(_.getDate()+1),s.url.searchParams.set("source",n),s.url.searchParams.set("second",i.toString()),s.url.searchParams.set("time",l),r({second:i,source:n,time:_})}},[n,i,l,a,r,s,d,b,T]}class he extends z{constructor(t){super(),G(this,t,pe,me,H,{onChange:4})}}function _e(o){let t,e,s;return{c(){t=m("video"),e=m("source"),this.h()},l(r){t=p(r,"VIDEO",{id:!0,title:!0,class:!0});var n=y(t);e=p(n,"SOURCE",{src:!0,type:!0}),n.forEach(h),this.h()},h(){A(e.src,s=o[3])||u(e,"src",s),u(e,"type","video/mp4"),u(t,"id","player"),u(t,"title","player"),t.controls=!0,u(t,"class","svelte-9d39y8")},m(r,n){V(r,t,n),c(t,e),o[11](t)},p(r,n){n&8&&!A(e.src,s=r[3])&&u(e,"src",s)},d(r){r&&h(t),o[11](null)}}}function ve(o){let t,e;return{c(){t=m("iframe"),this.h()},l(s){t=p(s,"IFRAME",{id:!0,title:!0,src:!0,frameborder:!0,class:!0}),y(t).forEach(h),this.h()},h(){u(t,"id","player"),u(t,"title","player"),A(t.src,e=o[3])||u(t,"src",e),u(t,"frameborder","0"),t.allowFullscreen=!0,u(t,"class","svelte-9d39y8")},m(s,r){V(s,t,r),o[10](t)},p(s,r){r&8&&!A(t.src,e=s[3])&&u(t,"src",e)},d(s){s&&h(t),o[10](null)}}}function ge(o){let t,e,s;return{c(){t=m("span"),e=m("i"),s=O("No video provided"),this.h()},l(r){t=p(r,"SPAN",{class:!0});var n=y(t);e=p(n,"I",{});var i=y(e);s=R(i,"No video provided"),i.forEach(h),n.forEach(h),this.h()},h(){u(t,"class","message svelte-9d39y8")},m(r,n){V(r,t,n),c(t,e),c(e,s)},p:B,d(r){r&&h(t)}}}function le(o){let t,e;return{c(){t=m("div"),e=O(o[4]),this.h()},l(s){t=p(s,"DIV",{class:!0});var r=y(t);e=R(r,o[4]),r.forEach(h),this.h()},h(){u(t,"class","countdown svelte-9d39y8")},m(s,r){V(s,t,r),c(t,e)},p(s,r){r&16&&de(e,s[4])},d(s){s&&h(t)}}}function be(o){let t,e;function s(l,a){return l[0]?l[2]===!0?ve:_e:ge}let r=s(o),n=r(o),i=o[0]&&o[4]&&le(o);return{c(){t=m("div"),n.c(),e=E(),i&&i.c(),this.h()},l(l){t=p(l,"DIV",{class:!0});var a=y(t);n.l(a),e=k(a),i&&i.l(a),a.forEach(h),this.h()},h(){u(t,"class","root svelte-9d39y8")},m(l,a){V(l,t,a),n.m(t,null),c(t,e),i&&i.m(t,null)},p(l,[a]){r===(r=s(l))&&n?n.p(l,a):(n.d(1),n=r(l),n&&(n.c(),n.m(t,e))),l[0]&&l[4]?i?i.p(l,a):(i=le(l),i.c(),i.m(t,null)):i&&(i.d(1),i=null)},i:B,o:B,d(l){l&&h(t),n.d(),i&&i.d()}}}function ye(o,t,e){let s;oe(o,ae,f=>e(9,s=f));let{videoUrl:r}=t,{videoTimestamp:n}=t,{desiredTime:i}=t,l=r.indexOf("youtube.")!==-1,a,d=r,b,T,_;function v(f){x[f?"unshift":"push"](()=>{a=f,e(1,a)})}function N(f){x[f?"unshift":"push"](()=>{a=f,e(1,a)})}return o.$$set=f=>{"videoUrl"in f&&e(0,r=f.videoUrl),"videoTimestamp"in f&&e(5,n=f.videoTimestamp),"desiredTime"in f&&e(6,i=f.desiredTime)},o.$$.update=()=>{if(o.$$.dirty&995){clearTimeout(b),clearInterval(T);let f=i.getTime()-Date.now()-n*1e3;if(r.indexOf("youtube.")!==-1){const[,C]=r.match(/v=([^&]*)/)||[];e(3,d=`http://www.youtube.com/embed/${C}?enablejsapi=1&origin=${s.url.origin}`),e(2,l=!0),setTimeout(()=>{a==null||a.contentWindow.postMessage(JSON.stringify({event:"command",func:"playVideo"}),"https://www.youtube.com"),a==null||a.contentWindow.postMessage(JSON.stringify({event:"command",func:"pauseVideo"}),"https://www.youtube.com")},1e3),e(7,b=setTimeout(()=>{e(4,_=""),clearInterval(T),a==null||a.contentWindow.postMessage(JSON.stringify({event:"command",func:"playVideo"}),"https://www.youtube.com")},f))}else e(2,l=!1),e(3,d=r),e(7,b=setTimeout(()=>{e(4,_=""),clearInterval(T),a.play()},f));e(8,T=setInterval(()=>{e(4,_=new Date(i.getTime()-Date.now()-n*1e3).toISOString().substring(11,19))},1e3))}},[r,a,l,d,_,n,i,b,T,s,v,N]}class we extends z{constructor(t){super(),G(this,t,ye,be,H,{videoUrl:0,videoTimestamp:5,desiredTime:6})}}function Te(o){let t,e,s,r,n,i;return s=new he({props:{onChange:o[3]}}),n=new we({props:{videoUrl:o[0],videoTimestamp:o[1],desiredTime:o[2]}}),{c(){t=m("div"),e=m("div"),$(s.$$.fragment),r=E(),$(n.$$.fragment),this.h()},l(l){t=p(l,"DIV",{class:!0});var a=y(t);e=p(a,"DIV",{class:!0});var d=y(e);ee(s.$$.fragment,d),r=k(d),ee(n.$$.fragment,d),d.forEach(h),a.forEach(h),this.h()},h(){u(e,"class","container svelte-13rnff6"),u(t,"class","root svelte-13rnff6")},m(l,a){V(l,t,a),c(t,e),te(s,e,null),c(e,r),te(n,e,null),i=!0},p(l,[a]){const d={};a&1&&(d.videoUrl=l[0]),a&2&&(d.videoTimestamp=l[1]),a&4&&(d.desiredTime=l[2]),n.$set(d)},i(l){i||(se(s.$$.fragment,l),se(n.$$.fragment,l),i=!0)},o(l){re(s.$$.fragment,l),re(n.$$.fragment,l),i=!1},d(l){l&&h(t),ne(s),ne(n)}}}function Ee(o,t,e){let s,r,n;return[s,r,n,({source:l,second:a,time:d})=>{e(0,s=l),e(1,r=a),e(2,n=d)}]}class Ue extends z{constructor(t){super(),G(this,t,Ee,Te,H,{})}}export{Ue as default};

import{S as z,i as G,s as H,k as p,q as O,a as T,l as h,m as b,r as R,h as _,c as E,n as u,b as V,G as f,I as C,J as D,K as oe,B,L as ue,H as ie,o as ce,u as fe,M as x,N as A,w as $,x as ee,y as te,f as se,t as re,z as ne}from"../../chunks/index-4d079cab.js";import{p as ae}from"../../chunks/stores-ec20e1cf.js";import{j as P}from"../../chunks/singletons-3f8c0d42.js";P.disable_scroll_handling;const me=P.goto;P.invalidate;P.invalidateAll;P.preload_data;P.preload_code;P.before_navigate;P.after_navigate;function de(i){let t,e,s,r,n,l,o,a,m,v,w,k,c,L,d,N,S,W,F,y,J,q,j,M,Y,K;return{c(){t=p("form"),e=p("p"),s=p("label"),r=O("Video from URL:"),n=T(),l=p("input"),o=T(),a=p("br"),m=T(),v=p("label"),w=O("Should play the exact second:"),k=T(),c=p("input"),L=T(),d=p("br"),N=T(),S=p("label"),W=O("When current time is:"),F=T(),y=p("input"),J=T(),q=p("br"),j=T(),M=p("p"),this.h()},l(I){t=h(I,"FORM",{class:!0});var U=b(t);e=h(U,"P",{class:!0});var g=b(e);s=h(g,"LABEL",{for:!0,class:!0});var Q=b(s);r=R(Q,"Video from URL:"),Q.forEach(_),n=E(g),l=h(g,"INPUT",{type:!0,id:!0,name:!0,placeholder:!0,class:!0}),o=E(g),a=h(g,"BR",{}),m=E(g),v=h(g,"LABEL",{for:!0,class:!0});var X=b(v);w=R(X,"Should play the exact second:"),X.forEach(_),k=E(g),c=h(g,"INPUT",{type:!0,id:!0,name:!0,min:!0,max:!0,step:!0,class:!0}),L=E(g),d=h(g,"BR",{}),N=E(g),S=h(g,"LABEL",{for:!0,class:!0});var Z=b(S);W=R(Z,"When current time is:"),Z.forEach(_),F=E(g),y=h(g,"INPUT",{type:!0,id:!0,name:!0,step:!0,class:!0}),J=E(g),q=h(g,"BR",{}),g.forEach(_),j=E(U),M=h(U,"P",{}),b(M).forEach(_),U.forEach(_),this.h()},h(){u(s,"for","source"),u(s,"class","svelte-1kctxfd"),u(l,"type","url"),u(l,"id","source"),u(l,"name","source"),u(l,"placeholder","YouTube link or direct link to the video file"),u(l,"class","svelte-1kctxfd"),u(v,"for","second"),u(v,"class","svelte-1kctxfd"),u(c,"type","number"),u(c,"id","second"),u(c,"name","second"),u(c,"min","0"),u(c,"max",""),u(c,"step","1"),u(c,"class","svelte-1kctxfd"),u(S,"for","time"),u(S,"class","svelte-1kctxfd"),u(y,"type","time"),u(y,"id","time"),u(y,"name","time"),u(y,"step","10"),u(y,"class","svelte-1kctxfd"),u(e,"class","container svelte-1kctxfd"),u(t,"class","root")},m(I,U){V(I,t,U),f(t,e),f(e,s),f(s,r),f(e,n),f(e,l),C(l,i[0]),f(e,o),f(e,a),f(e,m),f(e,v),f(v,w),f(e,k),f(e,c),C(c,i[1]),f(e,L),f(e,d),f(e,N),f(e,S),f(S,W),f(e,F),f(e,y),C(y,i[2]),f(e,J),f(e,q),f(t,j),f(t,M),Y||(K=[D(l,"input",i[7]),D(l,"blur",i[3]),D(c,"input",i[8]),D(c,"change",i[3]),D(c,"input",i[3]),D(y,"input",i[9]),D(y,"blur",i[3])],Y=!0)},p(I,[U]){U&1&&C(l,I[0]),U&2&&oe(c.value)!==I[1]&&C(c,I[1]),U&4&&C(y,I[2])},i:B,o:B,d(I){I&&_(t),Y=!1,ue(K)}}}function pe(i,t,e){let s;ie(i,ae,c=>e(6,s=c));let{onChange:r}=t,n="",l=0,o="23:59:59",a=!1;const m=c=>{c.currentTarget!==document.activeElement&&me(`?${s.url.searchParams.toString()}`)};ce(()=>{e(5,a=!0),e(0,n=s.url.searchParams.get("source")||""),e(1,l=parseInt(s.url.searchParams.get("second")||"0")),e(2,o=s.url.searchParams.get("time")||"23:59:59")});function v(){n=this.value,e(0,n)}function w(){l=oe(this.value),e(1,l)}function k(){o=this.value,e(2,o),e(5,a),e(6,s),e(0,n),e(1,l),e(4,r)}return i.$$set=c=>{"onChange"in c&&e(4,r=c.onChange)},i.$$.update=()=>{if(i.$$.dirty&119){o===""&&e(2,o="23:59:59");let c=new Date(new Date().toString().split(":")[0].slice(0,-2)+o);c<new Date&&c.setDate(c.getDate()+1),a&&(s.url.searchParams.set("source",n),s.url.searchParams.set("second",l.toString()),s.url.searchParams.set("time",o)),r({second:l,source:n,time:c})}},[n,l,o,m,r,a,s,v,w,k]}class he extends z{constructor(t){super(),G(this,t,pe,de,H,{onChange:4})}}function _e(i){let t,e,s;return{c(){t=p("video"),e=p("source"),this.h()},l(r){t=h(r,"VIDEO",{id:!0,title:!0,class:!0});var n=b(t);e=h(n,"SOURCE",{src:!0,type:!0}),n.forEach(_),this.h()},h(){A(e.src,s=i[3])||u(e,"src",s),u(e,"type","video/mp4"),u(t,"id","player"),u(t,"title","player"),t.controls=!0,u(t,"class","svelte-9d39y8")},m(r,n){V(r,t,n),f(t,e),i[11](t)},p(r,n){n&8&&!A(e.src,s=r[3])&&u(e,"src",s)},d(r){r&&_(t),i[11](null)}}}function ge(i){let t,e;return{c(){t=p("iframe"),this.h()},l(s){t=h(s,"IFRAME",{id:!0,title:!0,src:!0,frameborder:!0,class:!0}),b(t).forEach(_),this.h()},h(){u(t,"id","player"),u(t,"title","player"),A(t.src,e=i[3])||u(t,"src",e),u(t,"frameborder","0"),t.allowFullscreen=!0,u(t,"class","svelte-9d39y8")},m(s,r){V(s,t,r),i[10](t)},p(s,r){r&8&&!A(t.src,e=s[3])&&u(t,"src",e)},d(s){s&&_(t),i[10](null)}}}function ve(i){let t,e,s;return{c(){t=p("span"),e=p("i"),s=O("No video provided"),this.h()},l(r){t=h(r,"SPAN",{class:!0});var n=b(t);e=h(n,"I",{});var l=b(e);s=R(l,"No video provided"),l.forEach(_),n.forEach(_),this.h()},h(){u(t,"class","message svelte-9d39y8")},m(r,n){V(r,t,n),f(t,e),f(e,s)},p:B,d(r){r&&_(t)}}}function le(i){let t,e;return{c(){t=p("div"),e=O(i[4]),this.h()},l(s){t=h(s,"DIV",{class:!0});var r=b(t);e=R(r,i[4]),r.forEach(_),this.h()},h(){u(t,"class","countdown svelte-9d39y8")},m(s,r){V(s,t,r),f(t,e)},p(s,r){r&16&&fe(e,s[4])},d(s){s&&_(t)}}}function be(i){let t,e;function s(o,a){return o[0]?o[2]===!0?ge:_e:ve}let r=s(i),n=r(i),l=i[0]&&i[4]&&le(i);return{c(){t=p("div"),n.c(),e=T(),l&&l.c(),this.h()},l(o){t=h(o,"DIV",{class:!0});var a=b(t);n.l(a),e=E(a),l&&l.l(a),a.forEach(_),this.h()},h(){u(t,"class","root svelte-9d39y8")},m(o,a){V(o,t,a),n.m(t,null),f(t,e),l&&l.m(t,null)},p(o,[a]){r===(r=s(o))&&n?n.p(o,a):(n.d(1),n=r(o),n&&(n.c(),n.m(t,e))),o[0]&&o[4]?l?l.p(o,a):(l=le(o),l.c(),l.m(t,null)):l&&(l.d(1),l=null)},i:B,o:B,d(o){o&&_(t),n.d(),l&&l.d()}}}function ye(i,t,e){let s;ie(i,ae,d=>e(9,s=d));let{videoUrl:r}=t,{videoTimestamp:n}=t,{desiredTime:l}=t,o=r.indexOf("youtube.")!==-1,a,m=r,v,w,k;function c(d){x[d?"unshift":"push"](()=>{a=d,e(1,a)})}function L(d){x[d?"unshift":"push"](()=>{a=d,e(1,a)})}return i.$$set=d=>{"videoUrl"in d&&e(0,r=d.videoUrl),"videoTimestamp"in d&&e(5,n=d.videoTimestamp),"desiredTime"in d&&e(6,l=d.desiredTime)},i.$$.update=()=>{if(i.$$.dirty&995){clearTimeout(v),clearInterval(w);let d=l.getTime()-Date.now()-n*1e3;if(r.indexOf("youtube.")!==-1){const[,N]=r.match(/v=([^&]*)/)||[];e(3,m=`${s.url.protocol}//www.youtube.com/embed/${N}?enablejsapi=1&origin=${encodeURIComponent(s.url.origin)}`),e(2,o=!0),setTimeout(()=>{a==null||a.contentWindow.postMessage(JSON.stringify({event:"command",func:"playVideo"}),"https://www.youtube.com"),a==null||a.contentWindow.postMessage(JSON.stringify({event:"command",func:"pauseVideo"}),"https://www.youtube.com")},1e3),e(7,v=setTimeout(()=>{e(4,k=""),clearInterval(w),a==null||a.contentWindow.postMessage(JSON.stringify({event:"command",func:"playVideo"}),"https://www.youtube.com")},d))}else e(2,o=!1),e(3,m=r),e(7,v=setTimeout(()=>{e(4,k=""),clearInterval(w),a.play()},d));e(8,w=setInterval(()=>{e(4,k=new Date(l.getTime()-Date.now()-n*1e3).toISOString().substring(11,19))},1e3))}},[r,a,o,m,k,n,l,v,w,s,c,L]}class we extends z{constructor(t){super(),G(this,t,ye,be,H,{videoUrl:0,videoTimestamp:5,desiredTime:6})}}function Te(i){let t,e,s,r,n,l;return s=new he({props:{onChange:i[3]}}),n=new we({props:{videoUrl:i[0],videoTimestamp:i[1],desiredTime:i[2]}}),{c(){t=p("div"),e=p("div"),$(s.$$.fragment),r=T(),$(n.$$.fragment),this.h()},l(o){t=h(o,"DIV",{class:!0});var a=b(t);e=h(a,"DIV",{class:!0});var m=b(e);ee(s.$$.fragment,m),r=E(m),ee(n.$$.fragment,m),m.forEach(_),a.forEach(_),this.h()},h(){u(e,"class","container svelte-13rnff6"),u(t,"class","root svelte-13rnff6")},m(o,a){V(o,t,a),f(t,e),te(s,e,null),f(e,r),te(n,e,null),l=!0},p(o,[a]){const m={};a&1&&(m.videoUrl=o[0]),a&2&&(m.videoTimestamp=o[1]),a&4&&(m.desiredTime=o[2]),n.$set(m)},i(o){l||(se(s.$$.fragment,o),se(n.$$.fragment,o),l=!0)},o(o){re(s.$$.fragment,o),re(n.$$.fragment,o),l=!1},d(o){o&&_(t),ne(s),ne(n)}}}function Ee(i,t,e){let s,r,n;return[s,r,n,({source:o,second:a,time:m})=>{e(0,s=o),e(1,r=a),e(2,n=m)}]}class Pe extends z{constructor(t){super(),G(this,t,Ee,Te,H,{})}}export{Pe as default};

import{S as z,i as G,s as H,k as m,q as O,a as E,l as p,m as y,r as R,h,c as k,n as u,b as V,G as c,I as L,J as P,K as oe,B,L as ue,H as ie,o as ce,u as fe,M as x,N as A,w as $,x as ee,y as te,f as se,t as re,z as ne}from"../../chunks/index-4d079cab.js";import{p as ae}from"../../chunks/stores-ec20e1cf.js";import{j as D}from"../../chunks/singletons-3f8c0d42.js";D.disable_scroll_handling;const de=D.goto;D.invalidate;D.invalidateAll;D.preload_data;D.preload_code;D.before_navigate;D.after_navigate;function me(i){let t,e,s,r,n,l,o,a,f,b,T,_,v,N,d,C,S,W,F,w,J,q,j,M,Y,K;return{c(){t=m("form"),e=m("p"),s=m("label"),r=O("Video from URL:"),n=E(),l=m("input"),o=E(),a=m("br"),f=E(),b=m("label"),T=O("Should play the exact second:"),_=E(),v=m("input"),N=E(),d=m("br"),C=E(),S=m("label"),W=O("When current time is:"),F=E(),w=m("input"),J=E(),q=m("br"),j=E(),M=m("p"),this.h()},l(I){t=p(I,"FORM",{class:!0});var U=y(t);e=p(U,"P",{class:!0});var g=y(e);s=p(g,"LABEL",{for:!0,class:!0});var Q=y(s);r=R(Q,"Video from URL:"),Q.forEach(h),n=k(g),l=p(g,"INPUT",{type:!0,id:!0,name:!0,placeholder:!0,class:!0}),o=k(g),a=p(g,"BR",{}),f=k(g),b=p(g,"LABEL",{for:!0,class:!0});var X=y(b);T=R(X,"Should play the exact second:"),X.forEach(h),_=k(g),v=p(g,"INPUT",{type:!0,id:!0,name:!0,min:!0,max:!0,step:!0,class:!0}),N=k(g),d=p(g,"BR",{}),C=k(g),S=p(g,"LABEL",{for:!0,class:!0});var Z=y(S);W=R(Z,"When current time is:"),Z.forEach(h),F=k(g),w=p(g,"INPUT",{type:!0,id:!0,name:!0,step:!0,class:!0}),J=k(g),q=p(g,"BR",{}),g.forEach(h),j=k(U),M=p(U,"P",{}),y(M).forEach(h),U.forEach(h),this.h()},h(){u(s,"for","source"),u(s,"class","svelte-1kctxfd"),u(l,"type","url"),u(l,"id","source"),u(l,"name","source"),u(l,"placeholder","YouTube link or direct link to the video file"),u(l,"class","svelte-1kctxfd"),u(b,"for","second"),u(b,"class","svelte-1kctxfd"),u(v,"type","number"),u(v,"id","second"),u(v,"name","second"),u(v,"min","0"),u(v,"max",""),u(v,"step","1"),u(v,"class","svelte-1kctxfd"),u(S,"for","time"),u(S,"class","svelte-1kctxfd"),u(w,"type","time"),u(w,"id","time"),u(w,"name","time"),u(w,"step","10"),u(w,"class","svelte-1kctxfd"),u(e,"class","container svelte-1kctxfd"),u(t,"class","root")},m(I,U){V(I,t,U),c(t,e),c(e,s),c(s,r),c(e,n),c(e,l),L(l,i[0]),c(e,o),c(e,a),c(e,f),c(e,b),c(b,T),c(e,_),c(e,v),L(v,i[1]),c(e,N),c(e,d),c(e,C),c(e,S),c(S,W),c(e,F),c(e,w),L(w,i[2]),c(e,J),c(e,q),c(t,j),c(t,M),Y||(K=[P(l,"input",i[6]),P(l,"blur",i[3]),P(v,"input",i[7]),P(v,"change",i[3]),P(v,"input",i[3]),P(w,"input",i[8]),P(w,"blur",i[3])],Y=!0)},p(I,[U]){U&1&&L(l,I[0]),U&2&&oe(v.value)!==I[1]&&L(v,I[1]),U&4&&L(w,I[2])},i:B,o:B,d(I){I&&h(t),Y=!1,ue(K)}}}function pe(i,t,e){let s;ie(i,ae,_=>e(5,s=_));let{onChange:r}=t,n="",l=0,o="23:59:59";const a=_=>{_.currentTarget!==document.activeElement&&de(`?${s.url.searchParams.toString()}`)};ce(()=>{e(0,n=s.url.searchParams.get("source")||""),e(1,l=parseInt(s.url.searchParams.get("second")||"0")),e(2,o=s.url.searchParams.get("time")||"23:59:59")});function f(){n=this.value,e(0,n)}function b(){l=oe(this.value),e(1,l)}function T(){o=this.value,e(2,o),e(5,s),e(0,n),e(1,l),e(4,r)}return i.$$set=_=>{"onChange"in _&&e(4,r=_.onChange)},i.$$.update=()=>{if(i.$$.dirty&55){o===""&&e(2,o="23:59:59");let _=new Date(new Date().toString().split(":")[0].slice(0,-2)+o);_<new Date&&_.setDate(_.getDate()+1),r({second:l,source:n,time:_})}},[n,l,o,a,r,s,f,b,T]}class he extends z{constructor(t){super(),G(this,t,pe,me,H,{onChange:4})}}function _e(i){let t,e,s;return{c(){t=m("video"),e=m("source"),this.h()},l(r){t=p(r,"VIDEO",{id:!0,title:!0,class:!0});var n=y(t);e=p(n,"SOURCE",{src:!0,type:!0}),n.forEach(h),this.h()},h(){A(e.src,s=i[3])||u(e,"src",s),u(e,"type","video/mp4"),u(t,"id","player"),u(t,"title","player"),t.controls=!0,u(t,"class","svelte-9d39y8")},m(r,n){V(r,t,n),c(t,e),i[11](t)},p(r,n){n&8&&!A(e.src,s=r[3])&&u(e,"src",s)},d(r){r&&h(t),i[11](null)}}}function ve(i){let t,e;return{c(){t=m("iframe"),this.h()},l(s){t=p(s,"IFRAME",{id:!0,title:!0,src:!0,frameborder:!0,class:!0}),y(t).forEach(h),this.h()},h(){u(t,"id","player"),u(t,"title","player"),A(t.src,e=i[3])||u(t,"src",e),u(t,"frameborder","0"),t.allowFullscreen=!0,u(t,"class","svelte-9d39y8")},m(s,r){V(s,t,r),i[10](t)},p(s,r){r&8&&!A(t.src,e=s[3])&&u(t,"src",e)},d(s){s&&h(t),i[10](null)}}}function ge(i){let t,e,s;return{c(){t=m("span"),e=m("i"),s=O("No video provided"),this.h()},l(r){t=p(r,"SPAN",{class:!0});var n=y(t);e=p(n,"I",{});var l=y(e);s=R(l,"No video provided"),l.forEach(h),n.forEach(h),this.h()},h(){u(t,"class","message svelte-9d39y8")},m(r,n){V(r,t,n),c(t,e),c(e,s)},p:B,d(r){r&&h(t)}}}function le(i){let t,e;return{c(){t=m("div"),e=O(i[4]),this.h()},l(s){t=p(s,"DIV",{class:!0});var r=y(t);e=R(r,i[4]),r.forEach(h),this.h()},h(){u(t,"class","countdown svelte-9d39y8")},m(s,r){V(s,t,r),c(t,e)},p(s,r){r&16&&fe(e,s[4])},d(s){s&&h(t)}}}function be(i){let t,e;function s(o,a){return o[0]?o[2]===!0?ve:_e:ge}let r=s(i),n=r(i),l=i[0]&&i[4]&&le(i);return{c(){t=m("div"),n.c(),e=E(),l&&l.c(),this.h()},l(o){t=p(o,"DIV",{class:!0});var a=y(t);n.l(a),e=k(a),l&&l.l(a),a.forEach(h),this.h()},h(){u(t,"class","root svelte-9d39y8")},m(o,a){V(o,t,a),n.m(t,null),c(t,e),l&&l.m(t,null)},p(o,[a]){r===(r=s(o))&&n?n.p(o,a):(n.d(1),n=r(o),n&&(n.c(),n.m(t,e))),o[0]&&o[4]?l?l.p(o,a):(l=le(o),l.c(),l.m(t,null)):l&&(l.d(1),l=null)},i:B,o:B,d(o){o&&h(t),n.d(),l&&l.d()}}}function ye(i,t,e){let s;ie(i,ae,d=>e(9,s=d));let{videoUrl:r}=t,{videoTimestamp:n}=t,{desiredTime:l}=t,o=r.indexOf("youtube.")!==-1,a,f=r,b,T,_;function v(d){x[d?"unshift":"push"](()=>{a=d,e(1,a)})}function N(d){x[d?"unshift":"push"](()=>{a=d,e(1,a)})}return i.$$set=d=>{"videoUrl"in d&&e(0,r=d.videoUrl),"videoTimestamp"in d&&e(5,n=d.videoTimestamp),"desiredTime"in d&&e(6,l=d.desiredTime)},i.$$.update=()=>{if(i.$$.dirty&995){clearTimeout(b),clearInterval(T);let d=l.getTime()-Date.now()-n*1e3;if(r.indexOf("youtube.")!==-1){const[,C]=r.match(/v=([^&]*)/)||[];e(3,f=`${s.url.protocol}://www.youtube.com/embed/${C}?enablejsapi=1&origin=${s.url.origin}`),e(2,o=!0),setTimeout(()=>{a==null||a.contentWindow.postMessage(JSON.stringify({event:"command",func:"playVideo"}),"https://www.youtube.com"),a==null||a.contentWindow.postMessage(JSON.stringify({event:"command",func:"pauseVideo"}),"https://www.youtube.com")},1e3),e(7,b=setTimeout(()=>{e(4,_=""),clearInterval(T),a==null||a.contentWindow.postMessage(JSON.stringify({event:"command",func:"playVideo"}),"https://www.youtube.com")},d))}else e(2,o=!1),e(3,f=r),e(7,b=setTimeout(()=>{e(4,_=""),clearInterval(T),a.play()},d));e(8,T=setInterval(()=>{e(4,_=new Date(l.getTime()-Date.now()-n*1e3).toISOString().substring(11,19))},1e3))}},[r,a,o,f,_,n,l,b,T,s,v,N]}class we extends z{constructor(t){super(),G(this,t,ye,be,H,{videoUrl:0,videoTimestamp:5,desiredTime:6})}}function Te(i){let t,e,s,r,n,l;return s=new he({props:{onChange:i[3]}}),n=new we({props:{videoUrl:i[0],videoTimestamp:i[1],desiredTime:i[2]}}),{c(){t=m("div"),e=m("div"),$(s.$$.fragment),r=E(),$(n.$$.fragment),this.h()},l(o){t=p(o,"DIV",{class:!0});var a=y(t);e=p(a,"DIV",{class:!0});var f=y(e);ee(s.$$.fragment,f),r=k(f),ee(n.$$.fragment,f),f.forEach(h),a.forEach(h),this.h()},h(){u(e,"class","container svelte-13rnff6"),u(t,"class","root svelte-13rnff6")},m(o,a){V(o,t,a),c(t,e),te(s,e,null),c(e,r),te(n,e,null),l=!0},p(o,[a]){const f={};a&1&&(f.videoUrl=o[0]),a&2&&(f.videoTimestamp=o[1]),a&4&&(f.desiredTime=o[2]),n.$set(f)},i(o){l||(se(s.$$.fragment,o),se(n.$$.fragment,o),l=!0)},o(o){re(s.$$.fragment,o),re(n.$$.fragment,o),l=!1},d(o){o&&h(t),ne(s),ne(n)}}}function Ee(i,t,e){let s,r,n;return[s,r,n,({source:o,second:a,time:f})=>{e(0,s=o),e(1,r=a),e(2,n=f)}]}class De extends z{constructor(t){super(),G(this,t,Ee,Te,H,{})}}export{De as default};
